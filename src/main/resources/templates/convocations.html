<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta name="viewport" content="widht=device-widht, initial-scale=1.0">
    <meta charset="utf-8">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/pages-style.css" rel="stylesheet">
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css'>
    <link rel='stylesheet'
        href='https://cdn-uicons.flaticon.com/uicons-regular-straight/css/uicons-regular-straight.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-solid-straight/css/uicons-solid-straight.css'>
    <title>Gamelink</title>

</head>

<body>

    <div class="sidebar">
        <div class="logo_details">
            <div class="logo">
                <img class="big_logo" src="img/biglogo.png">

            </div>
        </div>
        <ul>
            <li>
                <a href="#">
                    <i class="fi fi-rr-search"></i>
                    <input type="text" placeholder="Procurar...">
                </a>
            </li>
            <li>
                <a href="/index">
                    <i class="fi fi-rs-house-chimney"></i>
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fi fi-rr-user"></i>
                    <span>Perfil</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fi fi-rs-bells"></i>
                    <span>Notificações</span>
                    <i class="fi fi-rr-angle-small-right"></i>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fi fi-rr-messages"></i>
                    <span>Conversas</span>
                    <i class="fi fi-rr-angle-small-right"></i>
                </a>
            </li>

            <li>
                <a href="/games">
                    <i class="fi fi-rr-gamepad"></i>
                    <span>Jogos</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fi fi-rr-users"></i>
                    <span>Amigos</span>
                    <i class="fi fi-rr-angle-small-right"></i>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fi fi-rr-users-alt"></i>
                    <span>Comunidades</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fi fi-rr-fire-flame-curved"></i>
                    <span>Convocações</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fi fi-rr-bookmark"></i>
                    <span>Favoritos</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="fi fi-rs-settings"></i>
                    <span>Configurações</span>
                </a>
            </li>
        </ul>
        <div class="profile_content">
            <div class="profile">
                <div class="profile_details">
                    <img src="/img/btn-profile.png" alt="">
                    <div class="name_grid">
                        <div class="name">
                            <p>Usuario</p>
                        </div>
                        <div class="nickname">
                            <p>Nickname</p>
                        </div>
                    </div>
                    <a href="/">
                        <i class="fi fi-rs-exit" id="log_out"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="convocation_container">
        <div class="convocation_top">
            <h1>Convocações</h1>
            <button type="submit" onclick="openPopup()">Criar convocação +</button>
        </div>
        <div class="convocation_grid">
            <article th:each="convocation: ${convocations}">
                <div class="convocation_block">
                    <img th:src="${convocation.game.gameIcon}" alt="">
                    <div class="convocation_titles">
                        <p class="details_title" th:text="${convocation.convocationTitle}"></p>
                        <p class="details_subtitle" th:text="${convocation.convocationType}"></p>
                    </div>
                </div>
                <div class="convocation_description">
                    <h5
                        th:text="${#strings.length(convocation.description) > 100 ? #strings.substring(convocation.description, 0, 100) + '...' : convocation.description}">
                    </h5>
                    <button type="submit">Saiba mais</button>
                </div>
            </article>
        </div>

        <div class="convocation_popup" id="popup">
            <div class="convocation_exit">
                <i class="fi fi-rr-rectangle-xmark" onclick="closePopup()"></i>
            </div>
            <form action="/registerConvocation" method="post">
                <div class="popup_container">
                    <a>Jogo</a>
                    <select name="game_id" required>
                        <option value=""></option>
                        <th:block th:each="game : ${games}">
                            <option th:value="${game.gameId}" th:text="${game.gameTitle}"></option>
                        </th:block>
                    </select>
                </div>
                    <div class="popup_container">
                        <a>Tipo de Convocação</a>
                        <select name="convocation_type" required>
                            <option value=""></option>
                            <option value="Casual">Casual</option>
                            <option value="Competitivo">Competitivo</option>
                            <option value="Dedicado">Dedicado</option>
                            <option value="Profissional">Profissional</option>
                        </select>
                    </div>
                    <div class="popup_container">
                        <a>Título</a>
                        <input name="convocation_title" required>
                    </div>
                    <div class="popup_container">
                        <div class="popup_text">
                            <textarea class="popup_description" rows="10" cols="50" name="description"></textarea>
                        </div>
                    </div>
                    <button class="popup-login" type="submit">ENVIAR</button>
            </form>
        </div>
    </div>

    <script>
        let popup = document.getElementById("popup");

        function openPopup() {
            popup.classList.add("open-popup")
        }

        function closePopup() {
            popup.classList.remove("open-popup")
        }

    </script>
</body>

</html>